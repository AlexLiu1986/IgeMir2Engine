主要就是A和B两个人，A下单，到NPC那出售物品，把要出售的物品放到界面框里，设置出售的价格。  然后告诉B可以买了，B再找NPC购买
这个主要是两个人间的交易，靠NPC中转而已

功能上主要就是A点出售物品，放东西进去，设置好价格和可以购买的人的名字， B过去再点购买物品， 然后就会显示在售的物品


盛大是，如果A出售东西给B，B不购买， 然后C再出售给B。这时候也是成功的。B点购买，先是显示A的物品，只有购买了或者取消掉A的物品，这时候才显示C的。  B取消A出售的东西，A那边查询正在出售的物品，那个物品还是在的，必须要自己再取消一次

一个人，出售和购买这两项是不受干扰的。可以N个人同时卖东西给自己，自己购买是逐个购买的。  但一个人只能同时出售一次东西给别人，要么交易成功，要么取消后才能再出售

====================================================
一：增加庄园寄卖系统，运用下列NPC命令
----------------------------------------------------
1、GAMEDIAMOND +/-/= 数字 //金刚石(0-65535) 操作(支持变量，如同GAMEGOLD命令)，保存到DB数据，支持新登陆器刷新显示
2、GAMEGIRD +/-/= 数字 //灵符(0-65535) 操作(支持变量，如同GAMEGOLD命令)，保存到DB数据，支持新登陆器刷新显示
6、<$GAMEDIAMOND> <$GAMEGIRD> //金刚石,灵符变量
8、CHECKGAMEDIAMOND >/=/< 数字 //检测金刚石，数字支持变量
9、CHECKGAMEGIRD >/=/< 数字 //检测灵符，数字支持变量
3、OPENYBDEAL 数字 //开通元宝交易，数字表示需要的元宝数量   永久使用,保存入人物数据里
<出售物品/@dealybme>  客户端弹出出售窗口,玩家可以放入物品,返回数据,M2接收写入文件里后,返回消息,客户端删除人物包裹里 出售的物品(放一件发一次消息--参考交易) 
4、QUERYYBSELL //查询正在出售的物品
5、QUERYYBDEAL //查询可以的购买物品
7、<$QUERYYBDEALLOG> //显示交易记录


寄售的数据保存在
MirServer\Mir200\Envir\UserData\UserData.dat
MirServer\Mir200\Envir\UserData\Storage\庄园_元宝使者-GA0A.esg
MirServer\Mir200\Envir\UserData\Consignation\庄园_元宝使者-GA0A.esi

寄售NPC位置：
元宝使者 GA0 70 68 元宝使者 0 15 3 0 0 0 0


详见附件的示意脚本：元宝使者-GA0.txt

(@ybdeal)
[@main]
您好，有什么可以效劳的？我可以为您提供关于元宝的各类服务 \
现在已经开通了金刚石的元宝交易功能，\
点击交易栏的第十格可以放置金刚石进行交易，\
如果不更新客户端，<交易栏的第十格将不能使用>。\
<查询元宝交易协议/@rule1>                  <开通元宝交易/@rule>\
<查询元宝数/@askybnum>                        <出售物品/@dealybme>\
<查询正在出售的物品/@askybsell>                <购买物品/@askybdeal>\
<查询交易信息/@askybdeallog>\
<去周围看看/@randomga0>                        <关闭对话/@exit> \

[@randomga0]
#act
mapmove GA0

[@askybsell]
我只能保证在我这里出售的物品3天内是不会有差池\
如果超过3天交易还没有成功，我可不能保证物品不会丢失\
并且就算不丢失，取回时也需要另外交给我1个元宝\
要知道，我做这行是很辛苦的，如果不想找麻烦\
那就在3天之内保证交易成功\
<返回/@main>
#ACT
QUERYYBSELL

[@askybdeal]
我只能保证在我这里出售的物品3天内是不会有差池\
如果超过3天交易还没有成功，我可不能保证物品不会丢失\
并且就算不丢失，取回时也需要另外交给我1个元宝\
要知道，我做这行是很辛苦的，如果不想找麻烦\
那就在3天之内保证交易成功\
<返回/@main>
#ACT
QUERYYBDEAL

[@askybdeallog]
<$QUERYYBDEALLOG>

[@askybnum]
你的帐号里元宝的总数是：<$GAMEGOLD>颗。\ \ \
<返回/@main>

[@rule]
人人都知道，我是玛法大陆最公正的人\
您要开通以元宝出售道具，必须向我支付1个元宝\
我将为您提供永久、公正的服务\ \
<我已阅读并同意元宝交易协议，支付一个元宝开通元宝交易/@openybsell>\
<不同意/@exit>

[@openybsell]
#ACT
//参数1 表示开通需要元宝
OPENYBDEAL 1

[@rule1]
您确定已仔细阅读了《元宝交易协议》并接受协议内的所有条款\
1、第一次使用元宝交易，必须开通元宝交易功能并向NPC支付1个元宝\
2、充值元宝是针对帐号进行的，\
该帐号下相同服务器的角色均可以使用这些元宝\
3、如果物品放在NPC处出售超过3天，交易将被终止，\
同时卖方取回物品时需额外再支付1个元宝。\
4、卖方在输入买方角色和元宝数量时，请注意输入正确的角色名\
因自己本身操作失误造成的损失系统将不进行补偿。\
<下一页/@rule2>

[@rule2]
5、在一笔交易未完成的情况下，交易双方均不可以再次进行元宝交易\
6、帐号在单组服务器携带元宝上限:9999个，\
元宝单次交易额最高不超过9999个，\
交易成功如果角色携带元宝数量超过上限，\
超过上限的元宝数量将被自动转换成游戏时间（天卡）\
7、交易成功，卖方将自动获得相应元宝\
8、玩家可在我这里查询最近一次的元宝交易记录\
在取消交易或接受交易物品时,若包裹栏无足够空间，则物品将不能取回\
<返回/@main>

[@AskYBSellFail]
没有查询到指定的记录
[@AskYBDealFail]
没有查询到指定的记录
[@YBDealOK]
收购物品成功